<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Strawberry App</title>
  <link href="output.css" rel="stylesheet">
  <script src="sb.min.js"></script>
  <script src="solutions.js" type="module"></script>
</head>

<style>
  body {
    background: hsla(43, 58%, 95%, 1);
    height: 100vh;
    width: 100vw;
    display: flex;
    justify-content: center;
    align-items: center;
  }
</style>

<!-- Template Definitions -->
<!-- Template Definitions -->
<template name="sb-calculator">
  <form sb-onsubmit="addIngredient">
    <select sb-model="selectedIngredientType">
      <option value="sugar">Sugar</option>
      <option value="water">Water</option>
      <option value="ethanol">Ethanol</option>
    </select>
    <input type="number" sb-model="selectedIngredientQuantity" placeholder="Enter Quantity" />
    <button type="submit">Add Ingredient</button>
  </form>

  <div>
    <h2>Total Volume: <span sb-mark="totalVolume">0</span></h2>
    <h2>Total Mass: <span sb-mark="totalMass">0</span></h2>
    <h2>ABV: <span sb-mark="abv">0</span></h2>
    <h2>BRIX: <span sb-mark="brix">0</span></h2>
  </div>

  <button sb-onclick="saveSolution">Save Solution</button>
</template>

<!-- Initialize Strawberry -->
<script>
  const data = sb.init();

  data.selectedIngredientType = 'sugar';
  data.selectedIngredientQuantity = 0;

  data.totalVolume = 0;
  data.totalMass = 0;
  data.abv = 0;
  data.brix = 0;

  data.addIngredient = function (e) {
    e.preventDefault();
    const type = data.selectedIngredientType;
    const quantity = data.selectedIngredientQuantity;

    // Create an instance of the ingredient and add it to the mixture
    // This assumes that you have a global mixture object and classes for each ingredient type
    let ingredient;
    switch (type) {
      case 'sugar':
        ingredient = new Sugar(quantity);
        break;
      case 'water':
        ingredient = new Water(quantity);
        break;
      case 'ethanol':
        ingredient = new Ethanol(quantity);
        break;
    }

    mixture.add(ingredient);

    // Update the total values
    data.totalVolume = mixture.totalVolume;
    data.totalMass = mixture.totalMass;
    data.abv = mixture.abv;
    data.brix = mixture.brix;
  }

  data.saveSolution = function () {
    // Save the solution to local storage
    localStorage.setItem('solution', JSON.stringify(mixture));
  }
</script>

<!-- HTML Body -->

<body>
  <!-- Use Calculator component -->
  <sb-calculator />
</body>

</html>
